{"userName":"546508b9842c4e3698a1f2d3ae6fa917","encoding":"0","time":"2025-12-20 23:07:15","sql":"CREATE TABLE \"${schemaName}\".\"post\"(\n\"id\" varchar   NOT NULL ,\n\"module_code\" varchar   NOT NULL ,\n\"dept_id\" varchar   NOT NULL ,\n\"post_id\" integer  AUTO_INCREMENT NOT NULL ,\n\"user_id\" integer  AUTO_INCREMENT NOT NULL ,\n\"title\" varchar (200)  NOT NULL ,\n\"content\" text   NOT NULL ,\n\"like_count\" integer   NULL DEFAULT 0,\n\"view_count\" integer   NULL DEFAULT 0,\n\"comment_count\" integer   NULL DEFAULT 0,\n\"create_time\" timestamp without time zone   NOT NULL DEFAULT current_timestamp,\nCONSTRAINT \"post_id_pk\" PRIMARY KEY (id) ENABLE VALIDATE \n)  ;\nALTER TABLE \"${schemaName}\".\"post\" SET TABLESPACE sys_default;\n\n\nCOMMENT ON COLUMN \"${schemaName}\".\"post\".\"id\" IS 'id';\nCOMMENT ON COLUMN \"${schemaName}\".\"post\".\"module_code\" IS '模块代码';\nCOMMENT ON COLUMN \"${schemaName}\".\"post\".\"dept_id\" IS '部门ID';\nCOMMENT ON COLUMN \"${schemaName}\".\"post\".\"post_id\" IS '帖子ID';\nCOMMENT ON COLUMN \"${schemaName}\".\"post\".\"user_id\" IS '用户ID';\nCOMMENT ON COLUMN \"${schemaName}\".\"post\".\"title\" IS '标题';\nCOMMENT ON COLUMN \"${schemaName}\".\"post\".\"content\" IS '内容';\nCOMMENT ON COLUMN \"${schemaName}\".\"post\".\"like_count\" IS '点赞次数';\nCOMMENT ON COLUMN \"${schemaName}\".\"post\".\"view_count\" IS '浏览次数';\nCOMMENT ON COLUMN \"${schemaName}\".\"post\".\"comment_count\" IS '评论次数';\nCOMMENT ON COLUMN \"${schemaName}\".\"post\".\"create_time\" IS '创建时间';\n\n\n\n\n"}
{"userName":"546508b9842c4e3698a1f2d3ae6fa917","encoding":"0","time":"2025-12-20 23:08:41","sql":"do $$begin IF NOT EXISTS (SELECT 1 FROM \"information_schema\".columns WHERE \"table_schema\"='manage_course' AND \"table_name\" ='post' AND \"column_name\" ='course_id') then \nALTER TABLE \"${schemaName}\".\"post\" ADD COLUMN \"course_id\" bpchar (4) NOT NULL  ;\nEND if;end $$\n;\nCOMMENT ON COLUMN \"${schemaName}\".\"post\".\"course_id\" IS '课程ID';\nALTER TABLE \"${schemaName}\".\"post\" ADD CONSTRAINT \"course_id\" FOREIGN KEY (course_id) REFERENCES manage_course.course (course_id) MATCH FULL ON DELETE NO ACTION ON UPDATE NO ACTION ENABLE VALIDATE;\n"}
